{% extends 'base_admin.html.twig' %}

{% block title %}Prices index{% endblock %}

{% block body %}
    <h1>Prices index</h1>

    {% if pricePeriods|length == 0 or priceCategories|length == 0 %}
        <p class="alert-warning text-center py-3">To add prices, please add periods and categories before.</p>
    {% endif %}

    <table class="table table-striped table-bordered">
        <thead class="text-center">
        <th>Periods</th>
        {% for category in priceCategories %}
            <th>{{ category.name }}</th>
        {% endfor %}
        </thead>
        {% for list in pricesTable %}
            <tr>
                <td>{{ list.period.name }}</td>
                {% for detail in  list.details %}
                    {% if detail.price|length > 0 %}
                        <td>
                            <p class="font-weight-bold text-center mb-0">{{ detail.price.price }} &euro;</p>
                            <p class="text-right mb-0">
                                <a href="{{ path('price_edit', {'id': detail.price.id}) }}">
                                    <i class="fas fa-edit"></i>
                                </a>
                            </p>
                        </td>
                    {% else %}
                        <td class="text-center">
                            <a href="{{ path('price_new', {'period': list.period.id, 'category': detail.category}) }}"
                               role="button" class="btn btn-danger">
                                <i class="fas fa-dollar-sign mr-2"></i> Add price
                            </a>
                        </td>
                    {% endif %}
                {% endfor %}
            </tr>
        {% endfor %}
    </table>

    {% include '/admin/price_period/_index.html.twig' %}
    {% include '/admin/price_category/_index.html.twig' %}
{% endblock %}
